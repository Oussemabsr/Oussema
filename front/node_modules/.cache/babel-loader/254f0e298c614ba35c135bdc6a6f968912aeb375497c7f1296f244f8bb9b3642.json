{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/USER/OneDrive/Bureau/SELL BUY/front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/USER/OneDrive/Bureau/SELL BUY/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/Users/USER/OneDrive/Bureau/SELL BUY/front/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/USER/OneDrive/Bureau/SELL BUY/front/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/USER/OneDrive/Bureau/SELL BUY/front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{Button,Form,Alert}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import{useNavigate}from'react-router-dom';import{login}from'../JS/Actions/user';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];// Add state for error handling\nvar dispatch=useDispatch();var navigate=useNavigate();var isAuth=useSelector(function(state){return state.userReducer.isAuth;});var handleChange=function handleChange(e){setUser(_objectSpread(_objectSpread({},user),{},_defineProperty({},e.target.name,e.target.value)));};var handleUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var _err$response,_err$response$data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_context.next=4;return dispatch(login(user));case 4:if(isAuth){navigate('/');}_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](1);setError(((_err$response=_context.t0.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.errors[0].msg)||'An error occurred.');case 10:case\"end\":return _context.stop();}},_callee,null,[[1,7]]);}));return function handleUser(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"loogin\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Login User\"}),error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error}),/*#__PURE__*/_jsx(Form.Label,{children:\"Email\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",placeholder:\"Enter email\",name:\"email\",onChange:handleChange}),/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Enter password\",name:\"password\",onChange:handleChange}),/*#__PURE__*/_jsx(Button,{className:\"btn-login\",variant:\"primary\",type:\"submit\",onClick:handleUser,children:\"Login\"})]});};export default Login;","map":{"version":3,"names":["React","useState","Button","Form","Alert","useDispatch","useSelector","useNavigate","login","jsx","_jsx","jsxs","_jsxs","Login","_useState","_useState2","_slicedToArray","user","setUser","_useState3","_useState4","error","setError","dispatch","navigate","isAuth","state","userReducer","handleChange","e","_objectSpread","_defineProperty","target","name","value","handleUser","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_err$response","_err$response$data","wrap","_callee$","_context","prev","next","preventDefault","t0","response","data","errors","msg","stop","_x","apply","arguments","className","children","variant","Label","Control","type","placeholder","onChange","onClick"],"sources":["C:/Users/USER/OneDrive/Bureau/SELL BUY/front/src/Pages/Login.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Button, Form, Alert } from 'react-bootstrap';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { login } from '../JS/Actions/user';\r\n\r\nconst Login = () => {\r\n  const [user, setUser] = useState({});\r\n  const [error, setError] = useState(null); // Add state for error handling\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const isAuth = useSelector((state) => state.userReducer.isAuth);\r\n\r\n  const handleChange = (e) => {\r\n    setUser({ ...user, [e.target.name]: e.target.value });\r\n  }\r\n\r\n  const handleUser = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      await dispatch(login(user));\r\n      if (isAuth) {\r\n        navigate('/');\r\n      }\r\n    } catch (err) {\r\n      setError(err.response?.data?.errors[0].msg || 'An error occurred.');\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className='loogin'>\r\n      <h1>Login User</h1>\r\n      {error && <Alert variant=\"danger\">{error}</Alert>}\r\n      <Form.Label>Email</Form.Label>\r\n      <Form.Control type=\"email\" placeholder=\"Enter email\" name=\"email\" onChange={handleChange} />\r\n      <Form.Label>Password</Form.Label>\r\n      <Form.Control type=\"password\" placeholder=\"Enter password\" name=\"password\" onChange={handleChange} />\r\n      <Button className='btn-login' variant=\"primary\" type=\"submit\" onClick={handleUser}>Login</Button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}