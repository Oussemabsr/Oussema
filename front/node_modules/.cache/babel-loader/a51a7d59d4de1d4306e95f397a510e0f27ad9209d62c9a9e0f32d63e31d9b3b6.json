{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/USER/OneDrive/Bureau/SELL BUY/front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/USER/OneDrive/Bureau/SELL BUY/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import axios from\"axios\";import{CURRENT_USER,FAIL_USER,LOAD_USER,LOGIN_USER,LOGOUT_USER,REGISTER_USER}from\"../ActionTypes/user\";export var register=function register(newUser){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch){var result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:dispatch({type:LOAD_USER});_context.prev=1;_context.next=4;return axios.post(\"/api/user/register\",newUser);case 4:result=_context.sent;dispatch({type:REGISTER_USER,payload:result.data});_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);dispatch({type:FAIL_USER,payload:_context.t0.response.data.errors});case 11:case\"end\":return _context.stop();}},_callee,null,[[1,8]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var login=function login(user,history){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch){var result;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:dispatch({type:LOAD_USER});_context2.prev=1;_context2.next=4;return axios.post('/api/user/login',user);case 4:result=_context2.sent;dispatch({type:LOGIN_USER,payload:result.data});_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);dispatch({type:FAIL_USER,payload:_context2.t0.response.data.errors});case 11:case\"end\":return _context2.stop();}},_callee2,null,[[1,8]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var current=function current(){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(dispatch){var config,result;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:dispatch({type:LOAD_USER});_context3.prev=1;config={headers:{authorization:localStorage.getItem(\"token\")}};_context3.next=5;return axios.get(\"/api/user/current\",config);case 5:result=_context3.sent;dispatch({type:CURRENT_USER,payload:result.data});_context3.next=12;break;case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](1);dispatch({type:FAIL_USER,payload:_context3.t0.response.data.errors});case 12:case\"end\":return _context3.stop();}},_callee3,null,[[1,9]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();};export var logout=function logout(){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(dispatch){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:dispatch({type:LOGOUT_USER});case 1:case\"end\":return _context4.stop();}},_callee4);}));return function(_x4){return _ref4.apply(this,arguments);};}();};","map":{"version":3,"names":["axios","CURRENT_USER","FAIL_USER","LOAD_USER","LOGIN_USER","LOGOUT_USER","REGISTER_USER","register","newUser","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","dispatch","result","wrap","_callee$","_context","prev","next","type","post","sent","payload","data","t0","response","errors","stop","_x","apply","arguments","login","user","history","_ref2","_callee2","_callee2$","_context2","_x2","current","_ref3","_callee3","config","_callee3$","_context3","headers","authorization","localStorage","getItem","get","_x3","logout","_ref4","_callee4","_callee4$","_context4","_x4"],"sources":["C:/Users/USER/OneDrive/Bureau/SELL BUY/front/src/JS/Actions/user.js"],"sourcesContent":["import axios from \"axios\"\r\nimport { CURRENT_USER, FAIL_USER, LOAD_USER, LOGIN_USER, LOGOUT_USER, REGISTER_USER } from \"../ActionTypes/user\"\r\n\r\n\r\n\r\nexport const register = (newUser) => async (dispatch) => {\r\n    dispatch({type: LOAD_USER})\r\n    try {\r\n        let result = await axios.post(\"/api/user/register\", newUser)\r\n        dispatch({type: REGISTER_USER, payload: result.data})\r\n    } catch (error) {\r\n        dispatch({type: FAIL_USER, payload: error.response.data.errors})\r\n    }\r\n}\r\n\r\nexport const login = (user, history) => async (dispatch) => {\r\n    dispatch({ type: LOAD_USER})\r\n    try {\r\n        let result = await axios.post('/api/user/login', user)\r\n        dispatch({ type: LOGIN_USER, payload: result.data})\r\n    } catch (error) {\r\n        dispatch({type: FAIL_USER, payload: error.response.data.errors})\r\n    }\r\n}\r\n\r\nexport const current = () => async (dispatch) => {\r\n    dispatch({ type: LOAD_USER })\r\n    try {\r\n        const config = {\r\n            headers: {\r\n                authorization: localStorage.getItem(\"token\")\r\n            }\r\n        }\r\n        let result = await axios.get(\"/api/user/current\", config)\r\n        dispatch({type: CURRENT_USER, payload: result.data})\r\n    } catch (error) {\r\n        dispatch({ type: FAIL_USER, payload: error.response.data.errors})\r\n    }\r\n}\r\n\r\nexport const logout = () => async (dispatch) => {\r\n    dispatch({ type: LOGOUT_USER })\r\n}\r\n\r\n  \r\n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}